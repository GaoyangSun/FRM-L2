READING 64: factor theory
1. principles
- factor, rather than assets, are important
- assets represent bundles of factors
- investors have differing optimal risk exposures

2. lessons from CAPM
[1] hold the factor, not the individual asset
- mean-variance efficient portfolio maximize Sharpe ratio, the combo of MVE and risk-free asset depends on risk aversion
- equilibrium, demand for an asset equals the supply
[2] investors have their own optimal factor risk exposures
[3] the average investor is fully invested in the market
- an investor with an average risk aversion would hold 100% MVE portfolio
[4] exposure to factor risk must be rewarded
- E(Rm) - Rf = riskAver*Var_m
- the more volatile the market, AND the more risk aversed the investor, the higher the risk premiums should be
[5] risk is measured as beta exposure
- SML - E(Ri) - rf = (cov(Ri, Rm)/var(Rm))*(E(Rm) - rf)
[6] valuable assets have low risk premiums

3. limited assumptions of CAPM
[1] investors only have financial wealth   - human capital
[2] investors have mean-variance   - skewness, kurtosis
[3] investors hvae a single period investment horizon
[4] investors have homogeneous expectations
[5] markets are frictionless
[6] all investors are price takers
[7] information is free and available to everyone

4. multifactor models
- APT, arbitrage pricing theory, deduced from stochastic discount factor(SDF)

5. efficient market theory
near-efficient
- active managers search for pockets of inefficiency, and in doing so cause the market to be almost efficient.
rational explanation approach
- losses during bad times are compensated by high returns/ but what are bad times?
behavioral explanation approach
- it is agents' (over/under) reactions to news that generates high returns

## ---------------------------------------------------------------------------------------
READING 65: factor
1. Macroeconomic Factors
[1] economic growth
in recession, government (and investment-grade) bonds are best (even better than that in expansion), albeit more volatile
high-yield bond are indifferent to economic conditions
[2] inflation
bad for both stock and bond.
not that bad for commodities and real estate
[3] volatility
- leverage effect 
cor(volatility, realized return) < 0
cor(volatility, expected return) > 0
price up - equity up - leverage down - risk down
risk down - lower expected return from CAPM - lower discount rate - higher price 
(expected return goes down, realized return goes up)
- unnamed effect
VIX increases when stock market goes down
[4] other factors
- productivity shock
- demographic risk
- political risk

2. investment style
- static (passive)
market factor Rm - rf
- dynamic (active)
[1] SMB   
- size strategy: small cap - large cap
[2] HML
- value strategy: value (high b2m) - growth (low b2m)
[3] WML
- momentum strategy: winner - loser

## ---------------------------------------------------------------------------------------
READING 66: alpha
1. low-risk anomaly
- firms with lower betas and lower volatility have higher returns over time
- Data evidence
  [1] cor(var(t-1), r(t))<0, cor(var(t), r(t))<0
   most volatile stocks that currently lose money will continue to lose money in the future
  [2] cor(beta(t-1), r(t))=0, cor(beta(t), r(t))>0

2. measurements
alpha = T mavg excess_return
tracking error = standard deviation of excess return
information ratio = alpha/tracking error
sharpe ratio = (r - rf)/standard deviation of return 

3. benchmark
- well-defined
- tradeable
- replicable
- adjusted for risk

4. fundamental law of active management
IR = IC * sqrt(BR)
where IC - info coef - cor(predicted value, actual value)
      BR - breadth - # investments deployed
      
5. factor regression
style analysis: a form of factor benchmarking where the factor exposures evolve over time

6. alphas for nonlinear strategies
tradeable - Var_m: VIX,  max{s-x,0}: call option

7. risk anomaly explanations
[1] data mining
[2] leverage constraints - cannot borrow money and instead to long beta
[3] agency problem - institutional managers cannot short sell
[4] preferences

## ---------------------------------------------------------------------------------------
READING 67: illiquid assets
1. characteristics of illiquid markets
[1] most assets are illiquid, at least to some degree
[2] markets for illiquid assets are large
[3] illiquid assets comprise the bulk of most investors' portfolios
[4] liquidity can dry up even in liquid asset markets

2. market imperfections
- market participation costs
- transactions costs
- search frictions (hard to find a counterparty)
- asymmetric information
- price impacts
- funding constraints

3. returns are overstated because of biases like:
- survivorship bias
  [1] poorly performing funds may not reoirt
  [2] studies only include survived funds
- (sample) selection bias
  [1] real estate are often sold where prices are high
  [2] buyout funds take company public when values are high/ VC sell companies when values are high
- infrequent trading - result in lower volatility, beta, correlation, higher autocorrelation

4. collect illiquidity risk premiums
[1] holding passive allocations to illiquid asset classes
- illiquidity biases
- ignored risk (fraud risk)
- no market index
- always a bet on management skill
[2] holding less liquid securities within asset classes
- on-the-run > off-the-run
- small > large bid-ask spread
- small > large bid-ask spread, large > small volume/turnover 
- larger risk premiums exist within asset classes than across because
  constraint on switching capital/investor overpay(because of limited knowledge)/illiquidity-shy investor overpay 
[3] market making at the individual security level
[4] dynamic rebalancing at the aggregate level (simplest and most affective on portfolio returns)

## ---------------------------------------------------------------------------------------
READING 68: portfolio construction
1. inputs
[1] current portfolio
[2] alphas ~ both the investor and manager constraints are considered
- scaling
  alpha = sigma * IC * score
  where sigma - tracking error, score - standard normal distribution
  so alpha ~ N(0,squred(IC*sigma)), and compare to actual volatility of alphas, and scale
- triming
- neutralization
  set alpha of benchmark to be 0
  alpha_Rp = 5%, alpha_benchmark = 1%, beta_Rp = 1.5
  benchmark-neutral alpha = alpha_Rp - beta_Rp*alpha_benchmark = 5% - 1.5*1% = 3.5%
[3] covariances
[4] transaction costs
- transaction costs must be amorized over the horizon of the benefit from the trade
- benefits (increase in alpha) occur over time, transaction costs occur @ specific time
[5] active risk aversion (lambd)
- utility = alpha - lambd*trackingError**2
  lamdb = IR/2*trackingError

2. techniques
portfolio alpha - riskAver*active risk**2 - transaction costs
[1] screen
- rank stocks by alpha/ choose top stocks/ average weighting
- pro: enhances returns/diversification/robust
- con: only use input alpha/ excluding certain industry with low alpha
[2] stratification
- rank stocks by alpha, industry/ ...
- no transaction costs
[3] linear programming
- rank stocks by alpha, industry, size, volatiliy, beta.../ ...
- pro: create a portfolio that closely resembles the benchmark
- con: may not have enough pre-specified stocks
[4] quadratic programming
- consider all the inputs
- con: more inputs mean more noise

3. porfolio reversions (rebalancing)
- no-trade region: benefit < transaction costs
marginal contribution to the value added = alpha - 2*riskAver*activeRisk*marginal contribution to the active risk 
so no-trade region: - cost of selling < marginal contribution to value added < cost of purchase
   when you buy, you get alpha and add more risk and pay purchase cost
           sell, you lose alpha and reduce risk and pay selling cost
rearranging (plus 2*riskAver*marginal contribution to active risk on all side):
2*riskAver*marginal contribution to active risk - cost of selling < alpha < 
2*riskAver*marginal contribution to active risk + cost of purchase
- the manager should assign a tracking portfolio weight equal to zeros for stocks
  which there is a forecast but that are not in the benchmark

## ---------------------------------------------------------------------------------------
READING 69: portfolio risk: analytical methods
1. portfolio VaR
- VaR_p = Z*sigma_p*V
  sigma_p = sqrt((w1*sigma1)^2 + (w2*sigma2)^2 + 2*w1*w2*sigma1*sigma2*cor(1,2))
- VaR_p = sqrt(VaR_1^2 + VaR_2^2 + 2*VaR_1*VaR_2*cor(1,2))
- if equally weighted/identical sigma/identical correlation
  sigma_p = sigma*sqrt(1/N + (1-1/N)*cor)
- individual VaR - VaR of an individual position in isolation
  VaR_i = Z*sigma_i*V_i
  
2. marginal VaR
per unit change in a portfolio VaR / additional investment in a position
MVaRi = d_VaR_p/d_V_i
      = d_(Z*sigma_p*V_p)/d_(w_i*V_p)
      = Z*(d_sigma_p/d_w_i)
      = Z*(cov(R_i, R_p)/sigma_p)     and because beta_i = cov(R_i, R_p)/sigma_p^2
      = (VaR_p/V_p) * beta_i

3. incremental VaR
change in portfolio VaR / additonal new postion
incremental VaR = VaR_p+i - VaR_p
                = MVaR_i * w_i

4. component VaR
contribution of risk from a to a portoflio
CVaR_i = MVaR_i * V_i
CVaR_i/VaR_p = ((VaR_p/V_p)*beta_i)*V_i/VaR_p
             = w_i*beta_i
             
5. risk parity
all component make the same risk contribution
CVaR1 = CVaR2 = ...

6. global minimun
minimize portfolio risk
MVaR1 = MVaR2 = ...
or minimize sigma_p

7. risk budget (across portfolios)
maximize portfolio sharpe ratio
(R1 - rf)/MVaR1 = (R2 - rf)/MVaR2 = ...


## ---------------------------------------------------------------------------------------
READING 70: VaR and risk budgeting in investment management
1. investment process
[1] determine the long-term, strategic asset allocations
    usually based on methods like mean-var optimization
[2] choose the passive and active managers

2. risks
- absolute/asset risk
  total possible losses = policy mix risk + active management risk
  R_asset = R_policyMix + R_activeMgt
          = sumOver(w_i_benchmark*r_i_benchmark) + sumOver(w_i_actual*r_i_actual - w_i_benchmark*r_i_benchmark)
  VaR_p = (VaR_policyMix^2 + VaR_activeMgt^2 + 2*VaR_policyMix*VaR_activeMgt*cor(policyMix,activeMgt)
- policy mix risk (various benchmarks risk)
  dollar loss owing to the policy mix selected by the fund
- avtive management risk
  dollar loss owing to the deviations from the policy mix
- relative risk
  dollar loss relative to a benchmark
  trackingError = R_p - R_b
  trackingErrorVolatility = (sigma_p^2 - 2*cor(p,b)*sigma_p*sigma_b + sigma_b^2)^0.5

3. funding risk (not literally)
the risk that the value of asset would be enought to cover the liabilities
- surplus = assets - liabilities
- delta_surplus = delta_assets - delta_liabilities
- R_surplus = delta_surplus/assets
            = delta_assets/assets - (delta_liab/liab)*(liab/assets)
            = R_asset - R_liab*(liab/assets)
- surplus at risk (SaR)  which is VaR of surplus
  expected surplus = A*(1+R_A) - L*(1+L_A) 
  sigma_surplus = ((A*sigma_A)^2 + (L*sigma_L)^2 - 2*sigma_A*sigma_L*cor(A,L))^0.5
  surplus at risk = expected surplus - Z*sigma_surplus
            
4. plan sponsor(owner) risk
- economic risk
  variation in the total economic earnings of the plan sponsor
- cash flow risk (surplus<0)
  variation of the contribution to the fund
  
5. why dramatic changes in risk
- a manager taking on more risk
- different managers taking similar bets
- more volatile markets

6. managers evaluation
- information ratio
  IR_i = expected excess return/manager's tracking error
  IR_p = expected excess return/portfolio's tracking error
- weight of portfolio managed by manager i
  w_i = (IR_i/IR_p) / (TE_i/TE_p)
      = (IR_I * TE_P) / (IR_P * TE_i)
      
## ---------------------------------------------------------------------------------------
READING 71: risk monitoring and performance measurement
1. risk planing
[1] setting expected return and volatility goals
[2] define quantitative measures of success or failure
[3] how risk capital will be used to meet object   -  RORC  return on risk capital
[4] define the difference between events that cause ordinary damage v. serious damage
[5] identify mission critical resources inside and outside

2. risk budgeting
across asset class/ managers/ portfolios
quantitative methods:
- set the min acceptable levels of RORC and ROE 
- apply mean-variance optimization to determine the weights for each asset classes
- simulate the portfolio performance based on the weights

3. risk monitoring
to seek and investigate any signifincant variances from budget

4. risk management unit
- monitors an investment management entity's portfolio risk exposures and 
  ascertains that the exposures are authorized and consistent with risk budgets previously set

5. liquidity duration
- the number of days necessary to dispose a portfolio;s holdings without a significant market impact
- LD = Q/(0.10*V)
  where LD - liquidity duration assuming that the desired max daily vol of any security is 10%
        Q - number of shares of the security
        V - daily vol of the security
        
## ---------------------------------------------------------------------------------------
READING 72: portfolio performance evaluation
1. time/dollar-weighted return
dollar-weighted return: IRR on a portfolio, taking into account all cash flows
time-weighted return: geometric mean of the measurement period return

2. the green zone
- calculate normalized return and tracking error
- compare actual to target
green to yellow to red

3. ratios
sharpe ratio = (R_i - rf)/sigma_i  - total risk
treynor ratio = (R_i - rf)/beta_i  - systematic risk
info ratio = (R_i-r_bench)/sigma_(i-bench) - unsystematic risk
SR_i^2 - SR_bench^2 = IR_i^2
M^2 = (SR_i - SR_mkt)*sigma_mkt
T^2 = (TR_i - TR_mkt)*beta_mkt = TR_i - (Rm-Rf) - Treynor ratio - mkt risk premium

excess return = R_p - R_bench
alpha (by regression)  Rp - rf = alpha - beta*(Rm - rf) + error

4. significance of alpha
H0: alpha = 0 Ha: alpha<>0
t = alpha/(sigma_alpha/sqrt(N))

Jensen's alpha (acutal return - theortical return by capm or apt) = R_p - (rf + beta*(Rm - rf))
